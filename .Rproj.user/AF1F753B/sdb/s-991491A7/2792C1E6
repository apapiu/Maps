{
    "contents" : "#percentage of people who walk to work by tract:\n\ngeo<-geo.make(state=c(\"NY\"),\n              county=c(5, 47, 61, 81), tract=\"*\", check = TRUE)\n\nbike<-acs.fetch(endyear = 2012, span = 5, geography = geo,\n                  table.number = \"B08301\", col.names = \"pretty\")\n\n\nbike_df <- data.frame(paste0(str_pad(bike@geography$state, 2, \"left\", pad=\"0\"), \n                               str_pad(bike@geography$county, 3, \"left\", pad=\"0\"), \n                               str_pad(bike@geography$tract, 6, \"left\", pad=\"0\")), \n                        bike@estimate[,c(\"Means of Transportation to Work: Total:\",\n                                           \"Means of Transportation to Work: Bicycle\")], \n                        stringsAsFactors = FALSE)\n\n\nfinal.df <- data.frame(GEOID = bike_df[,1], \n                       stat = bike_df$Means.of.Transportation.to.Work..Bicycle/\n                           bike_df$Means.of.Transportation.to.Work..Total. *100)\n\n\ntracts <- tracts <- tracts(state = 'NY', county = c(5, 47, 61, 81), cb=TRUE)\n\n\nmerge <- geo_join(tracts, final.df, \"GEOID\", \"GEOID\")\n\npal <- colorNumeric(\"Blues\", domain = c(0,14))\n\nleaflet() %>%\n    addProviderTiles(\"CartoDB.Positron\") %>%\n    addPolygons(data = merge, fillColor = ~pal(stat), fillOpacity = .6, \n                color = \"white\", weight = 1.5,\n                popup = paste0(merge$GEOID, \"<br>\",\"<h1>This is some text!</h1>\",\nmerge$stat))%>%\n    addLegend(pal = pal, \n              values = merge$stat, \n              position = \"bottomright\",\n              opacity = .7,\n              title = \"Percentage of People biking to work\")\n\n#--------------------------\n#do this at the zipcta level, unfortunately the acs.fetch is acting up so I download the data.\n#people who bike to work\n\n#data munging\nbikes <- read.csv(\"transport_zip.csv\", stringsAsFactors = FALSE)\nbikes <- select(bikes, zip = GEO.display.label, total = HD01_VD01, \n                bike = HD01_VD18)\nbikes <- bikes[-1,]\nbikes$zip <- unlist(lapply(bikes$zip, function(x){str_split(x, \" \")[[1]][2]}))\nbikes$stat <- round(as.numeric(bikes$bike)/as.numeric(bikes$total)*100,2)\n\n\nfinal.df <- select(bikes, zip, stat)\n\ncodes <- c(\"100\",\"101\",\"102\",\"103\",\"104\",\"111\",\"112\",\"113\",\"114\")\n#\"070\",\"071\",\"072\",\"073\")\n\nzips <- zctas(cb = TRUE, starts_with = codes) #tigris\n\nmerge <- geo_join(zips, final.df, \"ZCTA5CE10\", \"zip\") #tigris\n\npal <- colorNumeric(c(\"Blues\"), domain = -1:8)\n\n\nleaflet() %>%\n    addProviderTiles(\"CartoDB.Positron\") %>%\n    setView(lng = -74.0059, lat = 40.7127, zoom = 13) %>%\n    addPolygons(data = merge, fillColor = ~pal(stat), fillOpacity = .6, \n                color = \"white\", weight = 1.5,\n                popup = paste0(merge$stat, \"% biking to work\")) %>%\n    addLegend(pal = pal, \n              values = merge$stat, \n              position = \"bottomright\",\n              opacity = .7,\n              title = paste0(\"Percentage of People <br> Biking to Work\"))\n\n\n\n",
    "created" : 1455492055792.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3947927230",
    "id" : "2792C1E6",
    "lastKnownWriteTime" : 1455616595,
    "path" : "~/Documents/R/Maps_dataincu/bike.R",
    "project_path" : "bike.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 6,
    "source_on_save" : false,
    "type" : "r_source"
}